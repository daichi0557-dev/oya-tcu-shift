<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OYAÃ—TCU ã‚·ãƒ•ãƒˆï¼ˆãƒ‡ãƒ¢ï¼‰ï½œå°¾å±±å°å•†åº—è¡— Ã— æ±äº¬éƒ½å¸‚å¤§å­¦</title>
  <meta name="description" content="å°¾å±±å°å•†åº—è¡—ã®â€œã‚¿ã‚¤ãƒŸãƒ¼é¢¨â€å­¦ç”Ÿå‘ã‘ã‚¹ãƒãƒƒãƒˆã‚·ãƒ•ãƒˆã€‚0é™ã€œ7é™ã®æˆæ¥­ãƒšãƒ¼ã‚¹ã«åˆã‚ã›ã¦å¿œå‹Ÿã§ãã‚‹ãƒ‡ãƒ¢Webãƒšãƒ¼ã‚¸ã€‚">
  <style>
    :root{
      /* â€œTCUãƒ–ãƒ«ãƒ¼â€ã‚’æ„è­˜ã—ãŸãƒˆãƒ¼ãƒ³ï¼ˆâ€»éå…¬å¼ãƒ»å‚è€ƒè‰²ï¼‰ */
      --tcu-blue:#0B4EA2;
      --tcu-blue-2:#0A3E85;
      --ink:#0B1220;
      --muted:#5A6578;
      --bg:#F4F7FB;
      --card:#FFFFFF;
      --line:rgba(14, 25, 44, .10);
      --shadow:0 16px 40px rgba(10, 20, 40, .10);
      --radius:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Hiragino Sans", "Noto Sans JP", "Segoe UI", Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--ink);
      background: radial-gradient(1000px 520px at 18% 0%, rgba(11,78,162,.22), transparent 55%),
                  radial-gradient(900px 520px at 95% 10%, rgba(11,78,162,.12), transparent 55%),
                  var(--bg);
    }
    a{color:inherit}
    .wrap{max-width:1180px;margin:0 auto;padding:22px 18px 60px}
    .topbar{
      display:flex;align-items:center;justify-content:space-between;gap:12px;
      padding:14px 14px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.75);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(10,20,40,.08);
    }
    .brand{display:flex;align-items:center;gap:12px;min-width:240px}
    .logo{
      width:44px;height:44px;border-radius:14px;
      background: linear-gradient(145deg, var(--tcu-blue), #2F86FF);
      box-shadow: 0 10px 22px rgba(11,78,162,.22);
      display:grid;place-items:center;flex:0 0 auto;
      position:relative;overflow:hidden;
    }
    .logo svg{width:30px;height:30px}
    .brand h1{font-size:14.5px;line-height:1.1;margin:0}
    .brand p{margin:3px 0 0;font-size:12px;color:var(--muted)}
    .pillrow{display:flex;align-items:center;gap:10px;flex-wrap:wrap;justify-content:flex-end}
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      font-size:12px;color:var(--tcu-blue-2);
      padding:8px 10px;border-radius:999px;
      background: rgba(11,78,162,.08);
      border: 1px solid rgba(11,78,162,.18);
      user-select:none;
    }
    .pill small{color:var(--muted)}
    .hero{
      margin-top:18px;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:16px;
      align-items:stretch;
    }
    @media (max-width: 900px){
      .hero{grid-template-columns:1fr}
      .brand{min-width:auto}
    }
    .panel{
      border:1px solid var(--line);
      background: rgba(255,255,255,.8);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .heroLeft{
      padding:20px 20px 16px;
      background:
        radial-gradient(700px 300px at 10% 0%, rgba(11,78,162,.22), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.95), rgba(255,255,255,.78));
    }
    .kicker{display:inline-flex;align-items:center;gap:10px;font-size:12px;color:var(--muted)}
    .dot{width:9px;height:9px;border-radius:999px;background:var(--tcu-blue);box-shadow:0 0 0 4px rgba(11,78,162,.12)}
    .heroTitle{margin:10px 0 8px;font-size:28px;line-height:1.25;letter-spacing:-.02em}
    .heroTitle span{color:var(--tcu-blue)}
    .heroDesc{margin:0;color:var(--muted);font-size:14px;line-height:1.8;max-width:56ch}
    .searchRow{
      margin-top:14px;
      display:grid;grid-template-columns: 1fr auto;gap:10px;
      align-items:center;
    }
    @media (max-width: 520px){
      .searchRow{grid-template-columns:1fr}
    }
    .search{
      display:flex;align-items:center;gap:10px;
      border:1px solid var(--line);
      background:#fff;
      border-radius: 14px;
      padding:10px 12px;
      box-shadow: 0 10px 24px rgba(10,20,40,.06);
    }
    .search input{
      border:none;outline:none;font-size:14px;width:100%;
    }
    .btn{
      appearance:none;border:none;cursor:pointer;
      border-radius:14px;
      padding:12px 14px;
      font-weight:700;
      background: linear-gradient(135deg, var(--tcu-blue), #2F86FF);
      color:#fff;
      box-shadow: 0 14px 28px rgba(11,78,162,.22);
      transition: transform .08s ease, filter .2s ease;
      display:inline-flex;align-items:center;gap:10px;justify-content:center;
    }
    .btn:active{transform: translateY(1px)}
    .btn.secondary{
      background:#fff;color:var(--tcu-blue);
      border:1px solid rgba(11,78,162,.25);
      box-shadow: 0 10px 24px rgba(10,20,40,.06);
    }
    .heroRight{
      padding:18px;
      display:flex;flex-direction:column;gap:12px;
      background:
        radial-gradient(700px 280px at 90% 10%, rgba(11,78,162,.14), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.78));
    }
    .stats{
      display:grid;grid-template-columns: 1fr 1fr;gap:10px;
    }
    .stat{
      border:1px solid var(--line);
      border-radius:16px;
      background:#fff;
      padding:12px 12px 10px;
      box-shadow: 0 10px 24px rgba(10,20,40,.06);
    }
    .stat b{display:block;font-size:18px}
    .stat span{font-size:12px;color:var(--muted)}
    .miniCard{
      border:1px solid var(--line);
      border-radius:16px;
      background:#fff;
      overflow:hidden;
      display:grid;grid-template-columns: 96px 1fr;
      box-shadow: 0 10px 24px rgba(10,20,40,.06);
    }
    .miniCard img{width:96px;height:100%;object-fit:cover}
    .miniCard .mc{
      padding:12px 12px 10px;
    }
    .miniCard h3{margin:0;font-size:13.5px}
    .miniCard p{margin:6px 0 0;color:var(--muted);font-size:12.5px;line-height:1.6}
    .tabs{
      margin-top:14px;
      display:flex;gap:8px;flex-wrap:wrap;
    }
    .tab{
      cursor:pointer;user-select:none;
      padding:10px 12px;border-radius:999px;
      background: rgba(255,255,255,.75);
      border:1px solid var(--line);
      box-shadow: 0 10px 20px rgba(10,20,40,.06);
      font-size:12.5px;color:var(--muted);
      transition: background .15s ease, border-color .15s ease, color .15s ease;
      display:inline-flex;align-items:center;gap:8px;
    }
    .tab strong{color:var(--ink);font-weight:800}
    .tab.active{
      background: rgba(11,78,162,.10);
      border-color: rgba(11,78,162,.25);
      color:var(--tcu-blue-2);
    }
    .grid{
      margin-top:14px;
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap:14px;
    }
    .card{
      grid-column: span 6;
      border:1px solid var(--line);
      background: rgba(255,255,255,.86);
      border-radius: var(--radius);
      overflow:hidden;
      box-shadow: var(--shadow);
      display:grid;grid-template-columns: 168px 1fr;
      min-height:158px;
    }
    @media (max-width: 940px){
      .card{grid-column:span 12}
    }
    @media (max-width: 520px){
      .card{grid-template-columns:1fr}
      .card .thumb{height:170px}
    }
    .thumb{
      position:relative;
      background:#fff;
      overflow:hidden;
    }
    .thumb img{width:100%;height:100%;object-fit:cover;display:block;filter:saturate(1.05)}
    .badge{
      position:absolute;left:12px;top:12px;
      background: rgba(255,255,255,.92);
      border:1px solid var(--line);
      border-radius:999px;
      font-size:11.5px;
      padding:7px 10px;
      display:inline-flex;align-items:center;gap:8px;
      box-shadow: 0 12px 20px rgba(10,20,40,.10);
    }
    .badge .chip{
      width:8px;height:8px;border-radius:999px;background:var(--tcu-blue);
      box-shadow:0 0 0 4px rgba(11,78,162,.12);
    }
    .body{
      padding:14px 14px 12px;
      display:flex;flex-direction:column;gap:8px;
    }
    .titleRow{display:flex;align-items:flex-start;justify-content:space-between;gap:10px}
    .titleRow h2{margin:0;font-size:15.5px;line-height:1.35}
    .meta{
      margin:0;color:var(--muted);font-size:12.5px;line-height:1.6
    }
    .meta b{color:var(--ink)}
    .row{
      display:flex;gap:8px;flex-wrap:wrap;
    }
    .tag{
      font-size:11.5px;color:var(--tcu-blue-2);
      background: rgba(11,78,162,.08);
      border:1px solid rgba(11,78,162,.15);
      padding:6px 10px;border-radius:999px;
    }
    .actions{
      margin-top:auto;
      display:flex;gap:10px;align-items:center;flex-wrap:wrap;
    }
    .linklike{
      cursor:pointer;
      font-weight:800;
      font-size:12.5px;
      color:var(--tcu-blue-2);
      text-decoration: none;
      display:inline-flex;align-items:center;gap:8px;
      padding:10px 12px;border-radius:14px;
      background:#fff;border:1px solid var(--line);
      box-shadow: 0 10px 18px rgba(10,20,40,.06);
    }
    .foot{
      margin-top:18px;
      color:var(--muted);
      font-size:12px;line-height:1.75;
      padding:14px 16px;
      border-radius:16px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.72);
    }
    /* modal */
    .modalWrap{
      position:fixed;inset:0;display:none;place-items:center;
      background: rgba(10,18,32,.55);
      padding:18px;
      z-index:50;
    }
    .modalWrap.show{display:grid}
    .modal{
      width:min(900px, 100%);
      border-radius: 22px;
      background:#fff;
      border:1px solid rgba(255,255,255,.15);
      overflow:hidden;
      box-shadow: 0 30px 80px rgba(0,0,0,.35);
      display:grid;grid-template-columns: 1fr 1.2fr;
    }
    @media (max-width: 820px){
      .modal{grid-template-columns:1fr}
    }
    .modalImg{min-height:250px}
    .modalImg img{width:100%;height:100%;object-fit:cover;display:block}
    .modalBody{padding:16px 16px 14px}
    .modalHead{
      display:flex;align-items:flex-start;justify-content:space-between;gap:12px;
      margin-bottom:8px;
    }
    .modalHead h2{margin:0;font-size:18px;line-height:1.3}
    .x{
      border:none;background:#fff;cursor:pointer;
      width:40px;height:40px;border-radius:14px;
      display:grid;place-items:center;
      border:1px solid var(--line);
      box-shadow: 0 10px 16px rgba(10,20,40,.08);
    }
    .dl{
      margin:10px 0 12px;
      display:grid;gap:10px;
    }
    .kv{
      display:grid;grid-template-columns: 110px 1fr;gap:10px;
      padding:10px 12px;border:1px solid var(--line);
      border-radius:16px;background:#fff;
    }
    .kv dt{color:var(--muted);font-size:12px}
    .kv dd{margin:0;font-weight:800;font-size:13px}
    .note{
      margin:0;color:var(--muted);font-size:12.5px;line-height:1.7
    }
    .modalActions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .tiny{font-size:11.5px;color:var(--muted)}
    .toast{
      position:fixed;left:50%;transform:translateX(-50%);
      bottom:18px;
      background: rgba(255,255,255,.92);
      border:1px solid var(--line);
      border-radius: 999px;
      padding:10px 12px;
      box-shadow: 0 18px 40px rgba(10,20,40,.18);
      display:none;gap:10px;align-items:center;
      z-index:60;
      font-size:12.5px;
    }
    .toast.show{display:flex}
    .toast .tDot{width:9px;height:9px;border-radius:999px;background:var(--tcu-blue)}
  </style>
</head>
<body>
  <div class="wrap">

    <div class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true">
          <!-- ã‚ªãƒªã‚¸ãƒŠãƒ«ï¼ˆéå…¬å¼ï¼‰ãƒ­ã‚´ï¼šOYAÃ—TCUï¼ˆOã®ä¸­ã«Tã‚’æŠ½è±¡åŒ–ï¼‰ -->
          <svg viewBox="0 0 64 64" fill="none" role="img" aria-label="OYAÃ—TCU">
            <path d="M32 6c14.36 0 26 11.64 26 26S46.36 58 32 58 6 46.36 6 32 17.64 6 32 6Z" fill="rgba(255,255,255,.20)"/>
            <path d="M32 12c11.05 0 20 8.95 20 20s-8.95 20-20 20-20-8.95-20-20 8.95-20 20-20Z" fill="rgba(255,255,255,.25)"/>
            <path d="M21 22h22v6H35v22h-6V28h-8v-6Z" fill="white"/>
            <path d="M44.5 44.5 56 56" stroke="rgba(255,255,255,.85)" stroke-width="4" stroke-linecap="round"/>
          </svg>
        </div>
        <div>
          <h1>OYAÃ—TCU ã‚·ãƒ•ãƒˆï¼ˆãƒ‡ãƒ¢ï¼‰</h1>
          <p>å°¾å±±å°å•†åº—è¡— Ã— éƒ½å¸‚å¤§ãƒšãƒ¼ã‚¹ï¼ˆ0é™ã€œ7é™ï¼‰</p>
        </div>
      </div>

      <div class="pillrow">
        <div class="pill">â±ï¸ 0é™ã€œ7é™å¯¾å¿œ <small>ï¼ˆä¸–ç”°è°·ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹ã®æ™‚é–“å‰²ã‚’å‚è€ƒï¼‰</small></div>
        <div class="pill">ğŸ§‘â€ğŸ“ å­¦ç”Ÿå‘ã‘ã‚¹ãƒãƒƒãƒˆå‹Ÿé›†</div>
        <div class="pill">ğŸ“ å°¾å±±å°å‘¨è¾º</div>
      </div>
    </div>

    <section class="hero">
      <div class="panel heroLeft">
        <div class="kicker"><span class="dot"></span> æˆæ¥­ã®åˆé–“ã«ã€è¿‘å ´ã§â€œã¡ã‚‡ã†ã©ã„ã„â€ä»•äº‹ã‚’è¦‹ã¤ã‘ã‚‹</div>
        <h2 class="heroTitle"><span>éƒ½å¸‚å¤§ã®æ™‚é™</span>ã«åˆã‚ã›ã¦ã€<br/>ãŠåº—ã®å‹Ÿé›†ãŒè¦‹ãˆã‚‹ãƒ»å¿œå‹Ÿã§ãã‚‹</h2>
        <p class="heroDesc">
          å°¾å±±å°å•†åº—è¡—ã®åº—èˆ—ãŒã€Œã“ã®æ™‚é–“ã ã‘æ‰‹ä¼ã£ã¦ã»ã—ã„ã€ã‚’å‡ºã›ã¦ã€å­¦ç”Ÿã¯æˆæ¥­ãƒšãƒ¼ã‚¹ï¼ˆ0é™ã€œ7é™ï¼‰ã§æ¢ã—ã¦å¿œå‹Ÿã§ãã‚‹ã€ã¨ã„ã†æƒ³å®šã®ãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸ã§ã™ã€‚
          ã‚¯ãƒªãƒƒã‚¯ã§è©³ç´°ã‚’é–‹ãã€ãƒœã‚¿ãƒ³ã§å¿œå‹Ÿï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ï¼‰ã§ãã¾ã™ã€‚
        </p>

        <div class="searchRow">
          <div class="search" role="search">
            <span aria-hidden="true">ğŸ”</span>
            <input id="q" type="search" placeholder="åº—åãƒ»ä»•äº‹å†…å®¹ã§æ¤œç´¢ï¼ˆä¾‹ï¼šãƒ¬ã‚¸ / å“å‡ºã— / ä»•è¾¼ã¿ / æ¢±åŒ…ï¼‰" />
          </div>
          <button class="btn" id="openNow">ã„ã¾ã®å‹Ÿé›†ã‚’è¦‹ã‚‹</button>
        </div>

        <div class="tabs" id="tabs"></div>
      </div>

      <aside class="panel heroRight">
        <div class="stats">
          <div class="stat"><b id="statCount">â€”</b><span>è¡¨ç¤ºä¸­ã®å‹Ÿé›†</span></div>
          <div class="stat"><b id="statApplied">â€”</b><span>å¿œå‹Ÿæ¸ˆã¿ï¼ˆã“ã®ç«¯æœ«ï¼‰</span></div>
        </div>

        <div class="miniCard">
          <img alt="å•†åº—è¡—ã®ã‚¤ãƒ¡ãƒ¼ã‚¸" src="https://images.unsplash.com/photo-1520975958228-3a41b241d5f4?auto=format&fit=crop&w=400&q=80" />
          <div class="mc">
            <h3>å°¾å±±å°ã¾ã§ã®å‹•ç·šã‚’çŸ­ã</h3>
            <p>ç©ºãã‚³ãƒãƒ»æ”¾èª²å¾Œã«å¯„ã‚Œã‚‹è·é›¢æ„Ÿã§ã€å­¦æ¥­ã¨ã®ä¸¡ç«‹ã‚’å‰æã«ã—ãŸè¨­è¨ˆã€‚</p>
          </div>
        </div>

        <div class="miniCard">
          <img alt="ã‚¢ãƒ«ãƒã‚¤ãƒˆã®ã‚¤ãƒ¡ãƒ¼ã‚¸" src="https://images.unsplash.com/photo-1521737604893-d14cc237f11d?auto=format&fit=crop&w=400&q=80" />
          <div class="mc">
            <h3>â€œçŸ­æ™‚é–“ãƒ»å³æˆ¦åŠ›â€ã‚’æœ€é©åŒ–</h3>
            <p>ãŠåº—å´ã¯å¿…è¦ãªæ™‚é™ã ã‘å‹Ÿé›†ã€‚å­¦ç”Ÿå´ã¯ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã«åˆã‚ã›ã¦å¿œå‹Ÿã€‚</p>
          </div>
        </div>

        <button class="btn secondary" id="reset">å¿œå‹Ÿå±¥æ­´ã‚’ãƒªã‚»ãƒƒãƒˆ</button>
        <div class="tiny">â€»ãƒ‡ãƒ¢ã®ãŸã‚ã€å¿œå‹Ÿã¯ã‚µãƒ¼ãƒãƒ¼é€ä¿¡ã›ãšãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã—ã¾ã™ã€‚</div>
      </aside>
    </section>

    <main class="grid" id="grid" aria-live="polite"></main>

    <div class="foot">
      <div><b>æ³¨æ„ï¼š</b>ã“ã‚Œã¯ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ï¼ˆãƒ‡ãƒ¢ï¼‰ã§ã™ã€‚æ±äº¬éƒ½å¸‚å¤§å­¦ã®å…¬å¼ã‚µãƒ¼ãƒ“ã‚¹ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã‚µã‚¤ãƒˆãƒ‡ã‚¶ã‚¤ãƒ³ã®é›°å›²æ°—ã¯å‚è€ƒã«ã—ã¤ã¤ã€ãƒ­ã‚´ã‚„ç´ æã¯ã‚ªãƒªã‚¸ãƒŠãƒ«/ãƒ•ãƒªãƒ¼ç´ æã§æ§‹æˆã—ã¦ã„ã¾ã™ã€‚</div>
      <div>å†™çœŸï¼šUnsplashã®ãƒ•ãƒªãƒ¼ç´ æï¼ˆè‡ªå‹•å–å¾—ãƒªãƒ³ã‚¯ï¼‰ã€‚åº—èˆ—åã¯å°¾å±±å°å‘¨è¾ºã®ä¸€èˆ¬çš„ãªæ¥­ç¨®ä¾‹ã‚’æ··ãœãŸãƒ‡ãƒ¢è¡¨ç¤ºã§ã™ã€‚</div>
    </div>

  </div>

  <!-- modal -->
  <div class="modalWrap" id="modalWrap" role="dialog" aria-modal="true" aria-label="å‹Ÿé›†è©³ç´°">
    <div class="modal" role="document">
      <div class="modalImg"><img id="mImg" alt="" src=""/></div>
      <div class="modalBody">
        <div class="modalHead">
          <div>
            <h2 id="mTitle">â€”</h2>
            <p class="meta" id="mMeta">â€”</p>
          </div>
          <button class="x" id="close" aria-label="é–‰ã˜ã‚‹">âœ•</button>
        </div>

        <dl class="dl">
          <div class="kv"><dt>æ™‚é™</dt><dd id="mPeriod">â€”</dd></div>
          <div class="kv"><dt>æ™‚é–“</dt><dd id="mTime">â€”</dd></div>
          <div class="kv"><dt>æ™‚çµ¦ç›®å®‰</dt><dd id="mPay">â€”</dd></div>
          <div class="kv"><dt>å‹Ÿé›†äººæ•°</dt><dd id="mNeed">â€”</dd></div>
          <div class="kv"><dt>ä»•äº‹å†…å®¹</dt><dd id="mWork">â€”</dd></div>
          <div class="kv"><dt>å‹¤å‹™åœ°</dt><dd id="mPlace">â€”</dd></div>
        </dl>

        <p class="note" id="mNote">â€”</p>

        <div class="modalActions">
          <button class="btn" id="applyBtn">å¿œå‹Ÿã™ã‚‹</button>
          <a class="linklike" id="mapLink" href="#" target="_blank" rel="noopener">ğŸ“ åœ°å›³ã§é–‹ã</a>
          <a class="linklike" id="shareLink" href="#">ğŸ”— ã“ã®å‹Ÿé›†ã‚’ã‚³ãƒ”ãƒ¼</a>
        </div>
        <div class="tiny" id="mTiny"></div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"><span class="tDot"></span><span id="toastText">â€”</span></div>

<script>
  // === ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ‡ãƒ¢ï¼‰===
  // 0é™ã¯ä¾¿å®œä¸Šã€çŸ­ã„æœã‚·ãƒ•ãƒˆã¨ã—ã¦è¨­å®šï¼ˆå®Ÿé‹ç”¨ã§ã¯è¦èª¿æ•´ï¼‰
  // 1ã€œ5é™ã®æ™‚é–“ã¯ä¸–ç”°è°·ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹ã®æˆæ¥­æ™‚é–“è¡¨ï¼ˆ2025å¹´åº¦ï¼‰æ²è¼‰ä¾‹ã‚’å‚è€ƒã«ã—ã¦ã„ã¾ã™ã€‚
  const PERIODS = [
    {k:"P0", name:"0é™", time:"08:10â€“09:10"},
    {k:"P1", name:"1é™", time:"09:20â€“11:00"},
    {k:"P2", name:"2é™", time:"11:10â€“12:50"},
    {k:"P3", name:"3é™", time:"13:40â€“15:20"},
    {k:"P4", name:"4é™", time:"15:30â€“17:10"},
    {k:"P5", name:"5é™", time:"17:20â€“19:00"},
    {k:"P6", name:"6é™", time:"19:10â€“20:40"},
    {k:"P7", name:"7é™", time:"20:50â€“22:20"}
  ];

  // Unsplashï¼ˆãƒ•ãƒªãƒ¼ï¼‰ç”»åƒï¼šåº—èˆ—ã‚«ãƒ†ã‚´ãƒªã®é›°å›²æ°—ç”¨
  const IMG = {
    cafe: "https://images.unsplash.com/photo-1442512595331-e89e73853f31?auto=format&fit=crop&w=900&q=80",
    bakery:"https://images.unsplash.com/photo-1542838132-92c53300491e?auto=format&fit=crop&w=900&q=80",
    konbini:"https://images.unsplash.com/photo-1542838132-92c53300491e?auto=format&fit=crop&w=900&q=80",
    grocery:"https://images.unsplash.com/photo-1542838132-92c53300491e?auto=format&fit=crop&w=900&q=80",
    yakitori:"https://images.unsplash.com/photo-1526318896980-cf78c088247c?auto=format&fit=crop&w=900&q=80",
    flowers:"https://images.unsplash.com/photo-1526045478516-99145907023c?auto=format&fit=crop&w=900&q=80",
    print:"https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?auto=format&fit=crop&w=900&q=80",
    fruit:"https://images.unsplash.com/photo-1459411552884-841db9b3cc2a?auto=format&fit=crop&w=900&q=80",
    pharmacy:"https://images.unsplash.com/photo-1584308666744-24d5c474f2ae?auto=format&fit=crop&w=900&q=80",
    bento:"https://images.unsplash.com/photo-1604908176997-125f25cc500e?auto=format&fit=crop&w=900&q=80"
  };

  const SHIFTS = [
    { id:"oy-001", shop:"ãƒ•ã‚¡ãƒŸãƒªãƒ¼ãƒãƒ¼ãƒˆï¼ˆãƒ‡ãƒ¢ï¼‰", category:"ã‚³ãƒ³ãƒ“ãƒ‹", img: IMG.konbini, period:"P0",
      pay:"æ™‚çµ¦1,250å††", need:"2å", place:"å°¾å±±å°é§…è¿‘ãï¼ˆãƒ‡ãƒ¢ï¼‰", work:"å“å‡ºã— / ãƒ¬ã‚¸è£œåŠ©",
      tags:["æœã ã‘","åˆå¿ƒè€…OK","é§…è¿‘"], note:"æœã®ç´å“å¯¾å¿œãŒé›†ä¸­ã™ã‚‹æ™‚é–“å¸¯ã€‚ãƒ¬ã‚¸ã¯è£œåŠ©ä¸­å¿ƒã§ã€å“å‡ºã—ãƒ¡ã‚¤ãƒ³ã€‚", lat:35.6039, lng:139.6563 },
    { id:"oy-002", shop:"ãƒ™ãƒ¼ã‚«ãƒªãƒ¼ï¼ˆãƒ‡ãƒ¢ï¼‰", category:"ãƒ™ãƒ¼ã‚«ãƒªãƒ¼", img: IMG.bakery, period:"P1",
      pay:"æ™‚çµ¦1,200å††", need:"1å", place:"å°¾å±±å°å•†åº—è¡—ï¼ˆãƒ‡ãƒ¢ï¼‰", work:"è¢‹è©°ã‚ / ãƒ¬ã‚¸è£œåŠ© / æ¸…æƒ",
      tags:["åˆå‰","æ¥å®¢","çŸ­æ™‚é–“"], note:"ãƒ”ãƒ¼ã‚¯ã¯10:00ã€œã€‚è¢‹è©°ã‚ä¸­å¿ƒã§ã€æ…£ã‚ŒãŸã‚‰ç°¡å˜ãªæ¥å®¢ã‚‚ã€‚", lat:35.6042, lng:139.6552 },
    { id:"oy-003", shop:"é’æœåº—ï¼ˆãƒ‡ãƒ¢ï¼‰", category:"é£Ÿå“", img: IMG.fruit, period:"P2",
      pay:"æ™‚çµ¦1,250å††", need:"2å", place:"å°¾å±±å°å•†åº—è¡—ï¼ˆãƒ‡ãƒ¢ï¼‰", work:"é™³åˆ— / å€¤æœ­è²¼ã‚Š / æ¢±åŒ…",
      tags:["ç©ºãã‚³ãƒ","ä½“ã‚’å‹•ã‹ã™","æ¥å®¢å°‘ãªã‚"], note:"æ˜¼å‰ã®è£œå……ãŒä¸­å¿ƒã€‚å£°å‡ºã—ã‚„å‘¼ã³è¾¼ã¿ã¯ä»»æ„ã€‚", lat:35.6037, lng:139.6569 },
    { id:"oy-004", shop:"èŠ±å±‹ï¼ˆãƒ‡ãƒ¢ï¼‰", category:"å°å£²", img: IMG.flowers, period:"P3",
      pay:"æ™‚çµ¦1,180å††", need:"1å", place:"å°¾å±±å°é§…ã€œå•†åº—è¡—ã‚¨ãƒªã‚¢ï¼ˆãƒ‡ãƒ¢ï¼‰", work:"æ°´æ›¿ãˆ / ãƒ©ãƒƒãƒ”ãƒ³ã‚°è£œåŠ©",
      tags:["åˆå¾Œ","ä½œæ¥­ä¸­å¿ƒ","é™ã‹ã‚"], note:"ãƒ©ãƒƒãƒ”ãƒ³ã‚°ã¯å…ˆè¼©ãŒæŒ‡ç¤ºã—ã¾ã™ã€‚æ°´æ›¿ãˆã‚„æ•´ç†ãŒãƒ¡ã‚¤ãƒ³ã€‚", lat:35.6040, lng:139.6572 },
    { id:"oy-005", shop:"ãŠå¼å½“ãƒ»æƒ£èœï¼ˆãƒ‡ãƒ¢ï¼‰", category:"é£²é£Ÿ", img: IMG.bento, period:"P4",
      pay:"æ™‚çµ¦1,300å††", need:"2å", place:"å°¾å±±å°å‘¨è¾ºï¼ˆãƒ‡ãƒ¢ï¼‰", work:"ç››ã‚Šä»˜ã‘è£œåŠ© / å—ã‘æ¸¡ã—",
      tags:["å¤•æ–¹å‰","è¡›ç”Ÿç ”ä¿®ã‚ã‚Š","çŸ­æ™‚é–“"], note:"15:30ã€œã®ä»•è¾¼ã¿ã€œå—ã‘æ¸¡ã—ã€‚è¡›ç”Ÿãƒã‚§ãƒƒã‚¯é …ç›®ã‚ã‚Šï¼ˆå½“æ—¥èª¬æ˜ï¼‰ã€‚", lat:35.6045, lng:139.6560 },
    { id:"oy-006", shop:"ç„¼ãé³¥åº—ï¼ˆãƒ‡ãƒ¢ï¼‰", category:"é£²é£Ÿ", img: IMG.yakitori, period:"P5",
      pay:"æ™‚çµ¦1,350å††", need:"2å", place:"å°¾å±±å°é§…å‘¨è¾ºï¼ˆãƒ‡ãƒ¢ï¼‰", work:"ãƒ‰ãƒªãƒ³ã‚¯ä½œã‚Š / é…è†³è£œåŠ©",
      tags:["æ”¾èª²å¾Œ","ã«ãã‚„ã‹","ç¨¼ããŸã„"], note:"17:20ã€œã®ç«‹ã¡ä¸Šã’ã€‚å¿™ã—ã„ã‘ã©çŸ­æ™‚é–“ã§å›ã—ã¾ã™ã€‚", lat:35.6035, lng:139.6557 },
    { id:"oy-007", shop:"å°åˆ·ãƒ»æ–‡å…·åº—ï¼ˆãƒ‡ãƒ¢ï¼‰", category:"ã‚µãƒ¼ãƒ“ã‚¹", img: IMG.print, period:"P6",
      pay:"æ™‚çµ¦1,200å††", need:"1å", place:"å°¾å±±å°å•†åº—è¡—ï¼ˆãƒ‡ãƒ¢ï¼‰", work:"å—ä»˜ / è£½æœ¬è£œåŠ© / ç™ºé€æº–å‚™",
      tags:["å¤œ","è½ã¡ç€ã","PCå°‘ã—"], note:"å—ä»˜ã¨ç°¡å˜ãªè£½æœ¬è£œåŠ©ã€‚PCæ“ä½œã¯å…¥åŠ›ç¨‹åº¦ã€‚", lat:35.6049, lng:139.6550 },
    { id:"oy-008", shop:"è–¬å±€ï¼ˆãƒ‡ãƒ¢ï¼‰", category:"åŒ»ç™‚", img: IMG.pharmacy, period:"P7",
      pay:"æ™‚çµ¦1,300å††", need:"1å", place:"å°¾å±±å°é§…å‰ï¼ˆãƒ‡ãƒ¢ï¼‰", work:"æ£šæ•´ç† / ä¼ç¥¨ä»•åˆ†ã‘ï¼ˆéèª¿å‰¤ï¼‰",
      tags:["é…ã‚","è»½ä½œæ¥­","é™ã‹ã‚"], note:"èª¿å‰¤æ¥­å‹™ã¯è¡Œã„ã¾ã›ã‚“ã€‚é–‰åº—å‰ã®æ•´ç†ä¸­å¿ƒã€‚", lat:35.6036, lng:139.6561 }
  ];

  // === çŠ¶æ…‹ ===
  const LS_KEY = "oya_tcu_applied_v1";
  const state = {
    activePeriod: "ALL",
    query: "",
    applied: new Set(JSON.parse(localStorage.getItem(LS_KEY) || "[]")),
    modalId: null
  };

  // === util ===
  const $ = (sel) => document.querySelector(sel);
  const escapeHtml = (s) => (s ?? "").toString()
    .replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;");

  function showToast(msg){
    const t = $("#toast");
    $("#toastText").textContent = msg;
    t.classList.add("show");
    clearTimeout(showToast._tm);
    showToast._tm = setTimeout(()=>t.classList.remove("show"), 1600);
  }

  function saveApplied(){
    localStorage.setItem(LS_KEY, JSON.stringify(Array.from(state.applied)));
    $("#statApplied").textContent = state.applied.size;
  }

  function periodLabel(pKey){
    const p = PERIODS.find(x=>x.k===pKey);
    return p ? `${p.name}ï¼ˆ${p.time}ï¼‰` : pKey;
  }

  // === tabs ===
  function renderTabs(){
    const tabs = $("#tabs");
    tabs.innerHTML = "";

    const make = (k, label, sub) => {
      const d = document.createElement("div");
      d.className = "tab" + (state.activePeriod===k ? " active" : "");
      d.tabIndex = 0;
      d.innerHTML = `<strong>${escapeHtml(label)}</strong><span>${escapeHtml(sub||"")}</span>`;
      d.addEventListener("click", ()=>{ state.activePeriod=k; render(); });
      d.addEventListener("keydown", (e)=>{ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); state.activePeriod=k; render(); }});
      return d;
    };

    tabs.appendChild(make("ALL", "å…¨éƒ¨", "0ã€œ7é™"));
    PERIODS.forEach(p=>tabs.appendChild(make(p.k, p.name, p.time)));
  }

  // === cards ===
  function matches(shift){
    const q = state.query.trim().toLowerCase();
    if(state.activePeriod !== "ALL" && shift.period !== state.activePeriod) return false;
    if(!q) return true;
    const hay = `${shift.shop} ${shift.category} ${shift.work} ${(shift.tags||[]).join(" ")}`.toLowerCase();
    return hay.includes(q);
  }

  function render(){
    renderTabs();
    $("#q").value = state.query;
    $("#statApplied").textContent = state.applied.size;

    const list = SHIFTS.filter(matches);
    $("#statCount").textContent = list.length;

    const grid = $("#grid");
    if(list.length === 0){
      grid.innerHTML = `
        <div class="panel" style="grid-column:span 12;padding:18px;background:rgba(255,255,255,.85);border-radius:18px;border:1px solid var(--line);box-shadow:var(--shadow)">
          <b style="display:block;margin-bottom:6px">è©²å½“ã™ã‚‹å‹Ÿé›†ãŒã‚ã‚Šã¾ã›ã‚“</b>
          <div style="color:var(--muted);font-size:13px;line-height:1.8">æ¤œç´¢èªã‚’å¤‰ãˆã‚‹ã‹ã€åˆ¥ã®æ™‚é™ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚</div>
        </div>`;
      return;
    }

    grid.innerHTML = list.map(s=>{
      const applied = state.applied.has(s.id);
      const label = periodLabel(s.period);
      const tags = (s.tags||[]).map(t=>`<span class="tag">${escapeHtml(t)}</span>`).join("");
      return `
        <article class="card" data-id="${escapeHtml(s.id)}">
          <div class="thumb">
            <img alt="${escapeHtml(s.shop)}ã®ã‚¤ãƒ¡ãƒ¼ã‚¸" src="${escapeHtml(s.img)}"/>
            <div class="badge"><span class="chip"></span>${escapeHtml(s.category)} / ${escapeHtml(label)}</div>
          </div>
          <div class="body">
            <div class="titleRow">
              <h2>${escapeHtml(s.shop)}</h2>
              <div class="tag" title="å¿œå‹ŸçŠ¶æ³">${applied ? "å¿œå‹Ÿæ¸ˆã¿" : "å‹Ÿé›†ä¸­"}</div>
            </div>
            <p class="meta"><b>${escapeHtml(s.pay)}</b> ãƒ»å‹Ÿé›†${escapeHtml(s.need)} ãƒ»${escapeHtml(s.place)}</p>
            <p class="meta">ä»•äº‹å†…å®¹ï¼š${escapeHtml(s.work)}</p>
            <div class="row">${tags}</div>

            <div class="actions">
              <a class="linklike" href="#${escapeHtml(s.id)}" data-open="${escapeHtml(s.id)}">ğŸ“„ è©³ç´°ã‚’è¦‹ã‚‹</a>
              <button class="btn secondary" data-quick="${escapeHtml(s.id)}">${applied ? "å¿œå‹Ÿã‚’å–ã‚Šæ¶ˆã™" : "å¿œå‹Ÿã™ã‚‹"}</button>
            </div>
          </div>
        </article>`;
    }).join("");

    // bind
    grid.querySelectorAll("[data-open]").forEach(el=>{
      el.addEventListener("click", (e)=>{ e.preventDefault(); openModal(el.getAttribute("data-open")); });
    });
    grid.querySelectorAll("[data-quick]").forEach(el=>{
      el.addEventListener("click", ()=>toggleApply(el.getAttribute("data-quick"), true));
    });
  }

  // === modal ===
  function openModal(id){
    const s = SHIFTS.find(x=>x.id===id);
    if(!s) return;

    state.modalId = id;
    $("#mImg").src = s.img;
    $("#mImg").alt = `${s.shop}ã®ã‚¤ãƒ¡ãƒ¼ã‚¸`;
    $("#mTitle").textContent = s.shop;
    $("#mMeta").innerHTML = `<b>${escapeHtml(s.category)}</b> ãƒ» ${escapeHtml(s.place)}`;
    $("#mPeriod").textContent = periodLabel(s.period);
    $("#mTime").textContent = PERIODS.find(p=>p.k===s.period)?.time || "â€”";
    $("#mPay").textContent = s.pay;
    $("#mNeed").textContent = s.need;
    $("#mWork").textContent = s.work;
    $("#mPlace").textContent = s.place;
    $("#mNote").textContent = s.note;

    const applied = state.applied.has(s.id);
    $("#applyBtn").textContent = applied ? "å¿œå‹Ÿã‚’å–ã‚Šæ¶ˆã™" : "å¿œå‹Ÿã™ã‚‹";
    $("#applyBtn").onclick = ()=>toggleApply(s.id, false);

    const mapUrl = `https://www.google.com/maps?q=${encodeURIComponent(s.lat + "," + s.lng)}`;
    $("#mapLink").href = mapUrl;

    const url = location.origin && location.origin !== "null"
      ? `${location.origin}${location.pathname}#${s.id}`
      : `${location.href.split("#")[0]}#${s.id}`;

    $("#shareLink").onclick = async (e)=>{
      e.preventDefault();
      try{
        await navigator.clipboard.writeText(url);
        showToast("ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ");
      }catch{
        showToast("ã‚³ãƒ”ãƒ¼ã§ãã¾ã›ã‚“ã§ã—ãŸï¼ˆãƒ–ãƒ©ã‚¦ã‚¶åˆ¶é™ï¼‰");
      }
    };

    $("#mTiny").textContent = `å‹Ÿé›†IDï¼š${s.id}ï¼ˆãƒ‡ãƒ¢ï¼‰`;
    $("#modalWrap").classList.add("show");
    document.body.style.overflow="hidden";
  }

  function closeModal(){
    $("#modalWrap").classList.remove("show");
    document.body.style.overflow="";
    state.modalId = null;
  }

  $("#close").addEventListener("click", closeModal);
  $("#modalWrap").addEventListener("click", (e)=>{ if(e.target.id==="modalWrap") closeModal(); });
  document.addEventListener("keydown", (e)=>{ if(e.key==="Escape") closeModal(); });

  function toggleApply(id, fromCard){
    if(state.applied.has(id)){
      state.applied.delete(id);
      saveApplied();
      showToast("å¿œå‹Ÿã‚’å–ã‚Šæ¶ˆã—ã¾ã—ãŸ");
    }else{
      state.applied.add(id);
      saveApplied();
      showToast("å¿œå‹Ÿã—ã¾ã—ãŸï¼ˆãƒ‡ãƒ¢ï¼‰");
    }

    // update modal button label if needed
    if(state.modalId === id){
      $("#applyBtn").textContent = state.applied.has(id) ? "å¿œå‹Ÿã‚’å–ã‚Šæ¶ˆã™" : "å¿œå‹Ÿã™ã‚‹";
    }

    render();

    if(fromCard){
      const el = document.querySelector(`[data-id="${CSS.escape(id)}"]`);
      if(el) el.scrollIntoView({block:"nearest", behavior:"smooth"});
    }
  }

  // quick actions
  $("#q").addEventListener("input", (e)=>{ state.query = e.target.value; render(); });

  $("#openNow").addEventListener("click", ()=>{
    // â€œä»Šâ€ã‚’ç°¡æ˜“çš„ã«æ™‚é™ã¸ãƒãƒƒãƒ”ãƒ³ã‚°ï¼ˆãƒ‡ãƒ¢ï¼‰
    const now = new Date();
    const minutes = now.getHours()*60 + now.getMinutes();
    const ranges = [
      {k:"P0", a: 8*60+10, b: 9*60+10},
      {k:"P1", a: 9*60+20, b: 11*60+0},
      {k:"P2", a: 11*60+10, b: 12*60+50},
      {k:"P3", a: 13*60+40, b: 15*60+20},
      {k:"P4", a: 15*60+30, b: 17*60+10},
      {k:"P5", a: 17*60+20, b: 19*60+0},
      {k:"P6", a: 19*60+10, b: 20*60+40},
      {k:"P7", a: 20*60+50, b: 22*60+20}
    ];
    const hit = ranges.find(r => minutes>=r.a && minutes<=r.b);
    state.activePeriod = hit ? hit.k : "ALL";
    render();
    showToast(hit ? `ã„ã¾ã®æ™‚é™ï¼š${periodLabel(hit.k)}` : "ã„ã¾ã¯æˆæ¥­æ™‚é–“å¤–ï¼ˆå…¨éƒ¨è¡¨ç¤ºï¼‰");
  });

  $("#reset").addEventListener("click", ()=>{
    state.applied = new Set();
    saveApplied();
    render();
    showToast("å¿œå‹Ÿå±¥æ­´ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ");
  });

  // deep link
  function boot(){
    renderTabs();
    saveApplied();
    render();
    const hash = (location.hash || "").replace("#","");
    if(hash){
      const exists = SHIFTS.some(s=>s.id===hash);
      if(exists) openModal(hash);
    }
  }
  boot();
</script>
</body>
</html>
